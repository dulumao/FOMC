---
slug: studio/reports
title: 研报与宏观月报模块
order: 54
summary: 固定结构的研报生成与宏观月报复盘。
flow_step: 研报
try_meeting: 2025-05-07
---

# 研报与宏观月报模块

目标：用固定结构输出研报，保证结论可复盘、可对比，风格尽量贴近券商研报。

## 多智能体研报流水线

研报采用“固定结构 + 多智能体校验”的闭环，核心思路是先给出可读草稿，再做一致性/完整性/逻辑校验，最后输出终稿。

链路：

1) Draft：基于结构化数据与宏观事件上下文生成初稿  
2) Consistency：核查是否引用了不存在的数据/事件  
3) Completeness：检查是否覆盖必需小节  
4) Logic：检查结论-证据-机制是否自洽  
5) Editor：吸收反馈并输出终稿

每一轮调用都会写入 `data/prompt_runs/`，包含 system/user prompt 与输出内容，便于复盘与迭代。

## Prompt 组织方式

研报 prompt 统一放在 `content/prompts/reports/`：

- `nfp_report.md`：非农研报主模板（frontmatter 中包含 system prompt）
- `cpi_report.md`：CPI 研报主模板
- `macro_monthly_report.md`：宏观事件月报模板
- `report_consistency.md` / `report_completeness.md` / `report_logic.md` / `report_editor.md`：多智能体流程模板

模板结构分为两部分：

- **system prompt**：约束角色与禁止事项（比如不得编造、必须引用输入）  
- **user prompt**：结构化输入 + 输出格式要求

## NFP 研报 prompt 设计

输入块：

- 结构化指标摘要（新增非农、失业率、各类型失业率、就业率与参与率等）  
- 图表摘要与行业贡献说明  
- 宏观事件上下文（若缺失则明确声明）

输出结构（固定小节）：

- 核心结论  
- 图1：新增非农就业与失业率  
- 图2：分行业新增非农就业贡献率  
- 图3：各类型失业率  
- 图4：就业率与劳动参与率  
- 事件脉络  
- 风险提示

约束重点：

- 只引用输入中已有数据  
- 缺失必须明确说明  
- 事件仅作为“验证/解释”，不得当作已发生的就业数据

## CPI 研报 prompt 设计

输入块：

- CPI/核心 CPI 同比/环比指标  
- 同比/环比拉动拆分文本  
- 图表摘要  
- 宏观事件上下文

输出结构（固定小节）：

- 核心结论  
- 图1：CPI 与核心 CPI 同比  
- 图2：CPI 与核心 CPI 环比  
- 表1：同比拉动拆分（文字解读）  
- 表2：环比拉动拆分（文字解读）  
- 事件脉络  
- 风险提示

约束重点：

- 不允许输出 Markdown 表格  
- 不得编造分项权重或缺失月份  
- 事件只做因果校验

## 宏观事件月报 prompt 设计

宏观月报由宏观事件模块生成，但同样属于研报链路的重要输入。

结构：

- 首段 2-3 句概览当月冲击  
- 按主题/传导渠道分段（通胀/就业/增长/金融稳定/供应链/地缘等）  
- 每段末尾附来源链接（可追溯）

约束重点：

- 只基于事件清单  
- 不引入事件之外的新信息  
- 突出“冲击方向与传导渠道”，弱化空泛描述

## 其它重要约束

- 输出必须可复盘：结构固定、字段明确、可对比  
- 生成过程可追踪：所有调用写入 `data/prompt_runs/`  
- 若宏观事件缺失，必须在报告中明确声明
